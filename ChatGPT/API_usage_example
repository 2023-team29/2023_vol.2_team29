import openai_secret_manager
import requests

# APIのエンドポイント
endpoint = "https://api.openai.com/v1/engine/davinci-codex/completions"

# APIキーの取得
secrets = openai_secret_manager.get_secret("openai")

# ヘッダーの設定
headers = {
    "Content-Type": "application/json",
    "Authorization": f"Bearer {secrets['api_key']}"
}

# APIに送信するデータの設定
data = {
    "prompt": "Hello, world!",
    "temperature": 0.5,
    "max_tokens": 50
}

# APIにリクエストを送信
response = requests.post(endpoint, headers=headers, json=data)

# 応答を出力
print(response.json())
